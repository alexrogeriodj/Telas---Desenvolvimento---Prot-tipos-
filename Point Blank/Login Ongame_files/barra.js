var BarraOngame={versao:"1.1.24",host:null,ambiente:null,usuario:null,jogo_aberto:!1,init:function(){this.carrega_host(),this.carrega_login()},carrega_host:function(){var a=this;$.each($("script"),function(t,e){url=e.src,parametros=url.split("barra.js"),""==parametros[1]&&(host=parametros[0].split("/"),a.host=host[2],window.location.host.indexOf("localhost")>=0||window.location.host.indexOf("10.0.4")>=0?(a.host="localhost",a.ambiente="ongame.com.br"):(url_dominio=window.location.host.split(".ongame."),a.host="ongame."+url_dominio[1],a.ambiente="ongame."+url_dominio[1]))}),a.host&&this.insere_tag_barra()},insere_tag_barra:function(){return $("body").prepend("<div id='barra-ongame'></div>"),$("#barra-ongame").next().css({paddingTop:"32px"}),this.carrega_template()},carrega_template:function(){var a=this,t=a.versao+"_barra_cached";return a.barra_cached=localStorage.getItem(t),a.barra_cached?($("#barra-ongame").html(a.barra_cached),a.preenche_template(!1)):void $.ajax({url:"http://"+a.host+"/barra/barra.html"}).done(function(e){return $("#barra-ongame").html(e),localStorage.setItem(t,e),a.preenche_template(!1)})},preenche_template:function(a){var t=this;return a?void $.each(t.dados().logado,function(a,t){$("#barra-ongame .barra-ongame-centro .barra-ongame-botoes div ul").append("<li><a href='"+t.href+"'                     title='"+t.title+"' class='"+t["class"]+"' target='"+t.target+"'>                     <i class='fa "+t.fa+"'></i>"+t.title+"</a></li>")}):($("#barra-ongame .barra-ongame-logo a").attr("href",t.dados().logo_link),$("#barra-ongame .barra-ongame-logo a img").attr("src",t.dados().logo_img_src),$("#barra-ongame .barra-ongame-logo").attr("title",t.dados().logo_title),$("#barra-ongame .barra-ongame-logo a").attr("alt",t.dados().logo_title),$.each(t.dados().jogos,function(a,t){$("#barra-ongame .barra-ongame-centro .barra-ongame-jogos div ul").append("<li><a href='"+t.href+"'                     title='"+t.title+"' target='"+t.target+"'                     data-imagem='"+t.imagem+"'><i class='fa "+t.fa+"'></i>"+t.title+"</a></li>")}),$.each(t.dados().botoes,function(a,t){$("#barra-ongame .barra-ongame-centro .barra-ongame-botoes").prepend("<a href='"+t.href+"'                     title='"+t.title+"' target='"+t.target+"' class='"+t["class"]+"'>                     <i class='fa "+t.fa+"'></i>"+t.title+"</a>")}),this.submenu_hover())},submenu_hover:function(){var a=this;$("#barra-ongame .barra-ongame-jogos>a").bind({click:function(){a.jogo_aberto===!1?($(this).next().slideDown(),a.jogo_aberto=!0):($(this).next().slideUp(),a.jogo_aberto=!1)},blur:function(){var t=this;setTimeout(function(){$(t).next().slideUp(),a.jogo_aberto=!1},400),a.jogo_aberto=!1}});var t=$("#barra-ongame .barra-ongame-botoes div");return $("#barra-ongame .barra-ongame-botoes a.logado").bind({click:function(){a.logado_aberto?(t.slideUp(),a.logado_aberto=!1):(t.slideDown(),a.logado_aberto=!0)},blur:function(){var a=this;setTimeout(function(){t.slideUp(),a.logado_aberto=!1},500)}}),$(".barra-ongame-jogos div ul li a").hover(function(){imagem=$(this).data("imagem"),$(".barra-ongame-jogos div img").attr("src",imagem)}),!0},carrega_login:function(){var a=this;return OGGID=a.carrega_cookie("OGGID"),OGGID&&(usuario=OGGID.split("#"),usuario=usuario[0],usuario&&(a.usuario=usuario,a.preenche_template(!0),$("#barra-ongame .login").hide(),$("#barra-ongame .cadastro").hide(),$("#barra-ongame .logado").show(),$("#barra-ongame .logado").append("Ol&aacute; "+usuario))),!0},dados:function(){var a=this;return itens={},itens.logo_link="http://"+a.ambiente+"/",itens.logo_title="Ongame",itens.logo_img_src="http://imagem.ongame.com.br/portal/global/ongame.png",itens.jogos=[{href:"http://pb."+a.ambiente+"/",title:"Point Blank",imagem:"http://imagem.ongame.com.br/portal/barra/point-blank.jpg",target:"_blank"},{href:"http://m2."+a.ambiente+"/",title:"Metin 2",imagem:"http://imagem.ongame.com.br/portal/barra/metin-2.jpg",target:"_blank"},{href:"http://aika."+a.ambiente+"/",title:"Aika",imagem:"http://imagem.ongame.com.br/portal/barra/aika.jpg",target:"_blank"},{href:"http://wyd."+a.ambiente+"/",title:"WYD",imagem:"http://imagem.ongame.com.br/portal/barra/wyd.jpg",target:"_blank"},{href:"http://chaos."+a.ambiente+"/",title:"Chaos",imagem:"http://imagem.ongame.com.br/portal/barra/chaos.jpg",target:"_blank"}],itens.botoes=[{href:"#",title:"",fa:"fa-unlock-alt","class":"logado",target:""},{href:"http://cadastro."+a.ambiente+"/",title:"Cadastrar",fa:"fa-plus","class":"cadastro",target:"_blank"},{href:"http://login."+a.ambiente+"/?url="+window.location.href,title:"Entrar",fa:"fa-lock","class":"login",target:""}],itens.logado=[{href:"http://login."+a.ambiente+"/logout?url="+window.location.href,title:"Sair",fa:"fa-unlock-alt","class":"",target:""},{href:"http://cadastro."+a.ambiente+"/alterar_senha.php?id_usuario="+a.usuario+"&cd=1",title:"Alterar Senha",fa:"fa-key","class":"",target:"_blank"},{href:"http://cadastro."+a.ambiente+"/alterar_email.php?id_usuario="+a.usuario+"&cd=1",title:"Alterar E-mail",fa:"fa-envelope-o","class":"",target:"_blank"},{href:"http://"+a.ambiente+"/historico-de-punicao/",title:"Hist&oacute;rico de Puni&ccedil;&atilde;o",fa:"fa-ban","class":"",target:"_blank"}],itens},carrega_cookie:function(a){var t=null;if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),o=0;o<e.length;o++){var r=jQuery.trim(e[o]);if(r.substring(0,a.length+1)==a+"="){t=decodeURIComponent(r.substring(a.length+1));break}}return t}};$(document).ready(function(a){BarraOngame.init()});